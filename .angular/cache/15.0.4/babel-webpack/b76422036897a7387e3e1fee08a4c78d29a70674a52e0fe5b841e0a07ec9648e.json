{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from \"@angular/core\";\nimport { AlertComponent } from \"../shared/alert/alert.component\";\nlet AuthComponent = class AuthComponent {\n  constructor(authService, router, componentFactoryResolver) {\n    this.authService = authService;\n    this.router = router;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.isLoginMode = true;\n    this.isLoading = false;\n    this.error = null;\n  }\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n  onSubmit(form) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n    let authObs;\n    this.isLoading = true;\n    if (this.isLoginMode) {\n      authObs = this.authService.login(email, password);\n    } else {\n      authObs = this.authService.signup(email, password);\n    }\n    authObs.subscribe(resData => {\n      console.log(resData);\n      this.isLoading = false;\n      this.router.navigate([\"/recipes\"]);\n    }, errorMessage => {\n      console.log(errorMessage);\n      this.error = errorMessage;\n      this.showErrorAlert(errorMessage);\n      this.isLoading = false;\n    });\n    form.reset();\n  }\n  onHandleError() {\n    this.error = null;\n  }\n  showErrorAlert(message) {\n    const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(AlertComponent);\n  }\n};\n__decorate([ViewChild()], AuthComponent.prototype, \"\", void 0);\nAuthComponent = __decorate([Component({\n  selector: \"app-auth\",\n  templateUrl: \"./auth.component.html\"\n})], AuthComponent);\nexport { AuthComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAA4BC,SAAS,QAAQ,eAAe;AAK9E,SAASC,cAAc,QAAQ,iCAAiC;AAMzD,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAMxBC,YACUC,WAAwB,EACxBC,MAAc,EACdC,wBAAkD;IAFlD,gBAAW,GAAXF,WAAW;IACX,WAAM,GAANC,MAAM;IACN,6BAAwB,GAAxBC,wBAAwB;IARlC,gBAAW,GAAG,IAAI;IAClB,cAAS,GAAG,KAAK;IACjB,UAAK,GAAW,IAAI;EAOjB;EAEHC,YAAY;IACV,IAAI,CAACC,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW;EACtC;EAEAC,QAAQ,CAACC,IAAY;IACnB,IAAI,CAACA,IAAI,CAACC,KAAK,EAAE;MACf;;IAEF,MAAMC,KAAK,GAAGF,IAAI,CAACG,KAAK,CAACD,KAAK;IAC9B,MAAME,QAAQ,GAAGJ,IAAI,CAACG,KAAK,CAACC,QAAQ;IAEpC,IAAIC,OAAqC;IAEzC,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,IAAI,IAAI,CAACR,WAAW,EAAE;MACpBO,OAAO,GAAG,IAAI,CAACX,WAAW,CAACa,KAAK,CAACL,KAAK,EAAEE,QAAQ,CAAC;KAClD,MAAM;MACLC,OAAO,GAAG,IAAI,CAACX,WAAW,CAACc,MAAM,CAACN,KAAK,EAAEE,QAAQ,CAAC;;IAGpDC,OAAO,CAACI,SAAS,CACdC,OAAO,IAAI;MACVC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;MACpB,IAAI,CAACJ,SAAS,GAAG,KAAK;MACtB,IAAI,CAACX,MAAM,CAACkB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;IACpC,CAAC,EACAC,YAAY,IAAI;MACfH,OAAO,CAACC,GAAG,CAACE,YAAY,CAAC;MACzB,IAAI,CAACC,KAAK,GAAGD,YAAY;MACzB,IAAI,CAACE,cAAc,CAACF,YAAY,CAAC;MACjC,IAAI,CAACR,SAAS,GAAG,KAAK;IACxB,CAAC,CACF;IAEDN,IAAI,CAACiB,KAAK,EAAE;EACd;EAEAC,aAAa;IACX,IAAI,CAACH,KAAK,GAAG,IAAI;EACnB;EAEQC,cAAc,CAACG,OAAe;IACpC,MAAMC,eAAe,GACnB,IAAI,CAACxB,wBAAwB,CAACyB,uBAAuB,CAAC9B,cAAc,CAAC;EACzE;CACD;AAtDa+B,YAAXhC,SAAS,EAAE,uCAAC;AAJFE,aAAa,eAJzBH,SAAS,CAAC;EACTkC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE;CACd,CAAC,GACWhC,aAAa,CA0DzB;SA1DYA,aAAa","names":["Component","ViewChild","AlertComponent","AuthComponent","constructor","authService","router","componentFactoryResolver","onSwitchMode","isLoginMode","onSubmit","form","valid","email","value","password","authObs","isLoading","login","signup","subscribe","resData","console","log","navigate","errorMessage","error","showErrorAlert","reset","onHandleError","message","alertCmpFactory","resolveComponentFactory","__decorate","selector","templateUrl"],"sourceRoot":"","sources":["/Users/evgeniabondar/Desktop/Git folder/ng-cooking-app/src/app/auth/auth.component.ts"],"sourcesContent":["import { Component, ComponentFactoryResolver, ViewChild } from \"@angular/core\";\nimport { NgForm } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { Observable } from \"rxjs\";\nimport { AuthResponseData, AuthService } from \"./auth.service\";\nimport { AlertComponent } from \"../shared/alert/alert.component\";\n\n@Component({\n  selector: \"app-auth\",\n  templateUrl: \"./auth.component.html\",\n})\nexport class AuthComponent {\n  isLoginMode = true;\n  isLoading = false;\n  error: string = null;\n  @ViewChild();\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n\n  onSubmit(form: NgForm) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n\n    let authObs: Observable<AuthResponseData>;\n\n    this.isLoading = true;\n\n    if (this.isLoginMode) {\n      authObs = this.authService.login(email, password);\n    } else {\n      authObs = this.authService.signup(email, password);\n    }\n\n    authObs.subscribe(\n      (resData) => {\n        console.log(resData);\n        this.isLoading = false;\n        this.router.navigate([\"/recipes\"]);\n      },\n      (errorMessage) => {\n        console.log(errorMessage);\n        this.error = errorMessage;\n        this.showErrorAlert(errorMessage);\n        this.isLoading = false;\n      }\n    );\n\n    form.reset();\n  }\n\n  onHandleError() {\n    this.error = null;\n  }\n\n  private showErrorAlert(message: string) {\n    const alertCmpFactory =\n      this.componentFactoryResolver.resolveComponentFactory(AlertComponent);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}