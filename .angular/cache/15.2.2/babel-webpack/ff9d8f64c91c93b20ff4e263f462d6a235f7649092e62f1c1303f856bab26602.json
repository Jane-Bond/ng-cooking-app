{"ast":null,"code":"import { createEffect, ofType } from \"@ngrx/effects\";\nimport { map, switchMap, withLatestFrom } from \"rxjs/operators\";\nimport * as RecipesActions from \"./recipe.actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"@angular/common/http\";\nexport class RecipeEffects {\n  constructor(actions$, http) {\n    this.actions$ = actions$;\n    this.http = http;\n    this.fectRecipes = createEffect(() => this.actions$.pipe(ofType(RecipesActions.FETCH_RECIPES), switchMap(() => {\n      return this.http.get(\"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\");\n    }), map(recipes => {\n      return recipes.map(recipe => {\n        return {\n          ...recipe,\n          ingredients: recipe.ingredients ? recipe.ingredients : []\n        };\n      });\n    }), map(recipes => {\n      return new RecipesActions.SetRecipes(recipes);\n    })));\n    this.storeRecipes = createEffect(() => this.actions$.pipe(ofType(RecipesActions.STORE_RECIPES), withLatestFrom(), switchMap(() => {\n      return this.http.put(\"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\", recipes);\n    })), {\n      dispatch: false\n    });\n  }\n}\nRecipeEffects.ɵfac = function RecipeEffects_Factory(t) {\n  return new (t || RecipeEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.HttpClient));\n};\nRecipeEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: RecipeEffects,\n  factory: RecipeEffects.ɵfac\n});","map":{"version":3,"mappings":"AACA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAC7D,SAASC,GAAG,EAAEC,SAAS,EAAEC,cAAc,QAAQ,gBAAgB;AAC/D,OAAO,KAAKC,cAAc,MAAM,kBAAkB;;;;AAKlD,OAAM,MAAOC,aAAa;EAsCxBC,YAAoBC,QAAiB,EAAUC,IAAgB;IAA3C,aAAQ,GAARD,QAAQ;IAAmB,SAAI,GAAJC,IAAI;IArCnD,gBAAW,GAAGT,YAAY,CAAC,MACzB,IAAI,CAACQ,QAAQ,CAACE,IAAI,CAChBT,MAAM,CAACI,cAAc,CAACM,aAAa,CAAC,EACpCR,SAAS,CAAC,MAAK;MACb,OAAO,IAAI,CAACM,IAAI,CAACG,GAAG,CAClB,+FAA+F,CAChG;IACH,CAAC,CAAC,EACFV,GAAG,CAAEW,OAAO,IAAI;MACd,OAAOA,OAAO,CAACX,GAAG,CAAEY,MAAM,IAAI;QAC5B,OAAO;UACL,GAAGA,MAAM;UACTC,WAAW,EAAED,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACC,WAAW,GAAG;SACxD;MACH,CAAC,CAAC;IACJ,CAAC,CAAC,EACFb,GAAG,CAAEW,OAAO,IAAI;MACd,OAAO,IAAIR,cAAc,CAACW,UAAU,CAACH,OAAO,CAAC;IAC/C,CAAC,CAAC,CACH,CACF;IAED,iBAAY,GAAGb,YAAY,CACzB,MACE,IAAI,CAACQ,QAAQ,CAACE,IAAI,CAChBT,MAAM,CAACI,cAAc,CAACY,aAAa,CAAC,EACpCb,cAAc,EAAE,EAChBD,SAAS,CAAC,MAAK;MACb,OAAO,IAAI,CAACM,IAAI,CAACS,GAAG,CAClB,+FAA+F,EAC/FL,OAAO,CACR;IACH,CAAC,CAAC,CACH,EACH;MAAEM,QAAQ,EAAE;IAAK,CAAE,CACpB;EAEiE;;AAtCvDb,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;SAAbA,aAAa;EAAAc,SAAbd,aAAa;AAAA","names":["createEffect","ofType","map","switchMap","withLatestFrom","RecipesActions","RecipeEffects","constructor","actions$","http","pipe","FETCH_RECIPES","get","recipes","recipe","ingredients","SetRecipes","STORE_RECIPES","put","dispatch","factory"],"sourceRoot":"","sources":["/Users/evgeniabondar/Desktop/Git folder/ng-cooking-app/src/app/recipes/store/recipe.effects.ts"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\nimport { Actions, createEffect, ofType } from \"@ngrx/effects\";\nimport { map, switchMap, withLatestFrom } from \"rxjs/operators\";\nimport * as RecipesActions from \"./recipe.actions\";\nimport { Recipe } from \"../recipe.model\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class RecipeEffects {\n  fectRecipes = createEffect(() =>\n    this.actions$.pipe(\n      ofType(RecipesActions.FETCH_RECIPES),\n      switchMap(() => {\n        return this.http.get<Recipe[]>(\n          \"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\"\n        );\n      }),\n      map((recipes) => {\n        return recipes.map((recipe) => {\n          return {\n            ...recipe,\n            ingredients: recipe.ingredients ? recipe.ingredients : [],\n          };\n        });\n      }),\n      map((recipes) => {\n        return new RecipesActions.SetRecipes(recipes);\n      })\n    )\n  );\n\n  storeRecipes = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(RecipesActions.STORE_RECIPES),\n        withLatestFrom(),\n        switchMap(() => {\n          return this.http.put(\n            \"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\",\n            recipes\n          );\n        })\n      ),\n    { dispatch: false }\n  );\n\n  constructor(private actions$: Actions, private http: HttpClient) {}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}