{"ast":null,"code":"import { createEffect, ofType } from \"@ngrx/effects\";\nimport { map, switchMap } from \"rxjs/operators\";\nimport * as RecipesActions from \"./recipe.actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"@angular/common/http\";\nexport class RecipeEffects {\n  constructor(actions$, http) {\n    this.actions$ = actions$;\n    this.http = http;\n    this.fectRecipes = createEffect(() => this.actions$.pipe(ofType(RecipesActions.FETCH_RECIPES), switchMap(() => {\n      return this.http.get(\"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\");\n    }), map(recipes => {\n      return recipes.map(recipe => {\n        return {\n          ...recipe,\n          ingredients: recipe.ingredients ? recipe.ingredients : []\n        };\n      });\n    }), map(recipes => {\n      return new RecipesActions.SetRecipes(recipes);\n    })));\n  }\n}\nRecipeEffects.ɵfac = function RecipeEffects_Factory(t) {\n  return new (t || RecipeEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.HttpClient));\n};\nRecipeEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: RecipeEffects,\n  factory: RecipeEffects.ɵfac\n});","map":{"version":3,"mappings":"AACA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAC7D,SAASC,GAAG,EAAEC,SAAS,QAAQ,gBAAgB;AAC/C,OAAO,KAAKC,cAAc,MAAM,kBAAkB;;;;AAKlD,OAAM,MAAOC,aAAa;EAyBxBC,YAAoBC,QAAiB,EAAUC,IAAgB;IAA3C,aAAQ,GAARD,QAAQ;IAAmB,SAAI,GAAJC,IAAI;IAxBnD,gBAAW,GAAGR,YAAY,CAAC,MACzB,IAAI,CAACO,QAAQ,CAACE,IAAI,CAChBR,MAAM,CAACG,cAAc,CAACM,aAAa,CAAC,EACpCP,SAAS,CAAC,MAAK;MACb,OAAO,IAAI,CAACK,IAAI,CAACG,GAAG,CAClB,+FAA+F,CAChG;IACH,CAAC,CAAC,EACFT,GAAG,CAAEU,OAAO,IAAI;MACd,OAAOA,OAAO,CAACV,GAAG,CAAEW,MAAM,IAAI;QAC5B,OAAO;UACL,GAAGA,MAAM;UACTC,WAAW,EAAED,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACC,WAAW,GAAG;SACxD;MACH,CAAC,CAAC;IACJ,CAAC,CAAC,EACFZ,GAAG,CAAEU,OAAO,IAAI;MACd,OAAO,IAAIR,cAAc,CAACW,UAAU,CAACH,OAAO,CAAC;IAC/C,CAAC,CAAC,CACH,CACF;EAIiE;;AAzBvDP,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;SAAbA,aAAa;EAAAW,SAAbX,aAAa;AAAA","names":["createEffect","ofType","map","switchMap","RecipesActions","RecipeEffects","constructor","actions$","http","pipe","FETCH_RECIPES","get","recipes","recipe","ingredients","SetRecipes","factory"],"sourceRoot":"","sources":["/Users/evgeniabondar/Desktop/Git folder/ng-cooking-app/src/app/recipes/store/recipe.effects.ts"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\nimport { Actions, createEffect, ofType } from \"@ngrx/effects\";\nimport { map, switchMap } from \"rxjs/operators\";\nimport * as RecipesActions from \"./recipe.actions\";\nimport { Recipe } from \"../recipe.model\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class RecipeEffects {\n  fectRecipes = createEffect(() =>\n    this.actions$.pipe(\n      ofType(RecipesActions.FETCH_RECIPES),\n      switchMap(() => {\n        return this.http.get<Recipe[]>(\n          \"https://angular-cooking-app-2a43c-default-rtdb.europe-west1.firebasedatabase.app/recipes.json\"\n        );\n      }),\n      map((recipes) => {\n        return recipes.map((recipe) => {\n          return {\n            ...recipe,\n            ingredients: recipe.ingredients ? recipe.ingredients : [],\n          };\n        });\n      }),\n      map((recipes) => {\n        return new RecipesActions.SetRecipes(recipes);\n      })\n    )\n  );\n\n  storeRecipes;\n\n  constructor(private actions$: Actions, private http: HttpClient) {}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}